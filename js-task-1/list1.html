<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s12{border-bottom:2px SOLID #dfe1e6;background-color:#cfe2f3;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s7{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s10{background-color:#cfe2f3;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s0{background-color:#ffffff;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s5{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;text-decoration:underline;-webkit-text-decoration-skip:none;text-decoration-skip-ink:none;color:#0052cc;font-family:'docs--apple-system',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s16{background-color:#fff2cc;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s2{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;font-weight:bold;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s4{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s17{border-bottom:2px SOLID #dfe1e6;background-color:#fff2cc;text-align:center;font-weight:bold;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s9{background-color:#ffffff;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s14{background-color:#d9ead3;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s1{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;font-weight:bold;color:#172b4d;font-family:'docs--apple-system',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s18{background-color:#fff2cc;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s15{border-bottom:2px SOLID #dfe1e6;background-color:#d9ead3;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s19{border-bottom:2px SOLID #dfe1e6;background-color:#fff2cc;text-align:center;color:#000000;font-family:'Arial';font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s6{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;color:#172b4d;font-family:'docs--apple-system',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s8{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;text-decoration:underline;-webkit-text-decoration-skip:none;text-decoration-skip-ink:none;color:#0052cc;font-family:'docs--apple-system',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s11{background-color:#cfe2f3;text-align:center;color:#172b4d;font-family:'Arial';font-size:11pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s13{background-color:#d9ead3;text-align:center;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s3{border-bottom:2px SOLID #dfe1e6;background-color:#ffffff;text-align:center;color:#172b4d;font-family:'docs--apple-system',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="0C0" style="width:252px;" class="column-headers-background">A</th><th id="0C1" style="width:100px;" class="column-headers-background">B</th><th id="0C2" style="width:135px;" class="column-headers-background">C</th><th id="0C3" style="width:100px;" class="column-headers-background">D</th><th id="0C4" style="width:158px;" class="column-headers-background">E</th><th id="0C5" style="width:108px;" class="column-headers-background">F</th><th id="0C6" style="width:100px;" class="column-headers-background">G</th><th id="0C7" style="width:100px;" class="column-headers-background">H</th><th id="0C8" style="width:113px;" class="column-headers-background">I</th><th id="0C9" style="width:97px;" class="column-headers-background">J</th><th id="0C10" style="width:100px;" class="column-headers-background">K</th><th id="0C11" style="width:100px;" class="column-headers-background">L</th><th id="0C12" style="width:100px;" class="column-headers-background">M</th><th id="0C13" style="width:100px;" class="column-headers-background">N</th><th id="0C14" style="width:100px;" class="column-headers-background">O</th><th id="0C15" style="width:100px;" class="column-headers-background">P</th><th id="0C16" style="width:100px;" class="column-headers-background">Q</th><th id="0C17" style="width:162px;" class="column-headers-background">R</th></tr></thead><tbody><tr style="height: 20px"><th id="0R0" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">1</div></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr style="height: 20px"><th id="0R1" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">2</div></th><td></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R2" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">3</div></th><td></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R3" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">4</div></th><td></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R4" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">5</div></th><td></td><td class="s1" dir="ltr">id</td><td class="s2" dir="ltr">order_id</td><td class="s1" dir="ltr">event_id</td><td class="s1" dir="ltr">event_date</td><td class="s1" dir="ltr">ticket_adult_price</td><td class="s1" dir="ltr">ticket_adult_quantity</td><td class="s1" dir="ltr">ticket_kid_price</td><td class="s2" dir="ltr">ticket_kid_quantity</td><td class="s2" dir="ltr">group_ticket_price</td><td class="s2" dir="ltr">group_ticket_quantity</td><td class="s2" dir="ltr">discount_amount</td><td class="s2" dir="ltr">discount_ticket_price</td><td class="s2" dir="ltr">discount_ticket_quantity</td><td class="s1" dir="ltr">barcode</td><td class="s1" dir="ltr">user_id</td><td class="s1" dir="ltr">equal_price</td><td class="s1" dir="ltr">created</td></tr><tr style="height: 20px"><th id="0R5" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">6</div></th><td></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R6" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">7</div></th><td></td><td class="s3" dir="ltr">1</td><td class="s4" dir="ltr">c4ca4238a0b</td><td class="s3" dir="ltr">3</td><td class="s3" dir="ltr">2021-08-21 13:00:00</td><td class="s3" dir="ltr">700</td><td class="s3" dir="ltr">1</td><td class="s3" dir="ltr">450</td><td class="s4" dir="ltr">1</td><td class="s4" dir="ltr">600</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s4" dir="ltr">0</td><td class="s5" dir="ltr"><a target="_blank" href="https://bitbucket.org/nevatrip/test-task/commits/11111111">11111111</a></td><td class="s3" dir="ltr">451</td><td class="s3" dir="ltr">700</td><td class="s3" dir="ltr">2021-01-11 13:22:09</td></tr><tr style="height: 20px"><th id="0R7" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">8</div></th><td></td><td class="s6" dir="ltr">2</td><td class="s7" dir="ltr">cccdf1aec4a</td><td class="s6" dir="ltr">6</td><td class="s6" dir="ltr">2021-07-29 18:00:00</td><td class="s6" dir="ltr">1000</td><td class="s6" dir="ltr">0</td><td class="s6" dir="ltr">800</td><td class="s7" dir="ltr">0</td><td class="s7" dir="ltr">900</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s7" dir="ltr">0</td><td class="s8" dir="ltr"><a target="_blank" href="https://bitbucket.org/nevatrip/test-task/commits/22222222">22222222</a></td><td class="s6" dir="ltr">364</td><td class="s6" dir="ltr">1600</td><td class="s6" dir="ltr">2021-01-12 17:02:08</td></tr><tr style="height: 20px"><th id="0R8" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">9</div></th><td></td><td class="s6" dir="ltr">3</td><td class="s9" dir="ltr">9c0760cab7</td><td class="s6" dir="ltr">3</td><td class="s6" dir="ltr">2021-08-15 17:00:00</td><td class="s6" dir="ltr">700</td><td class="s6" dir="ltr">4</td><td class="s6" dir="ltr">450</td><td class="s7" dir="ltr">4</td><td class="s7" dir="ltr">600</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s0" dir="ltr">0</td><td class="s7" dir="ltr">0</td><td class="s8" dir="ltr"><a target="_blank" href="https://bitbucket.org/nevatrip/test-task/commits/33333333">33333333</a></td><td class="s6" dir="ltr">15</td><td class="s6" dir="ltr">4150</td><td class="s6" dir="ltr">2021-01-13 10:08:45</td></tr><tr style="height: 75px"><th id="0R9" style="height: 75px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 75px">10</div></th><td class="s10" dir="ltr">Групповой билет - если количество человек, например, больше 10 или 15 - считаем взрослых по групповому тарифу group_ticket_price</td><td class="s10" dir="ltr">4</td><td class="s11" dir="ltr">da4b9237ba</td><td class="s10" dir="ltr">4</td><td class="s12" dir="ltr">2021-08-21 19:00:00</td><td class="s10" dir="ltr">800</td><td class="s10" dir="ltr">0</td><td class="s10" dir="ltr">600</td><td class="s10" dir="ltr">0</td><td class="s10" dir="ltr">700</td><td class="s10" dir="ltr">20</td><td class="s10" dir="ltr">0</td><td class="s10" dir="ltr">0</td><td class="s10" dir="ltr"></td><td class="s10" dir="ltr">555555555</td><td class="s10" dir="ltr">4343</td><td class="s10" dir="ltr">14000</td><td class="s12" dir="ltr">2021-08-06 11:50:43</td></tr><tr style="height: 20px"><th id="0R10" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">11</div></th><td class="s13" dir="ltr">Проверяем, использовался ли промокод на скидку или проходит ли клиент по условиям акции. Записываем размер скидки в поле discount_amount. Если скидка есть, то вычитаем процент из discount_ticket_price</td><td class="s13" dir="ltr">5</td><td class="s14" dir="ltr">cc509a6f7584</td><td class="s13" dir="ltr">3</td><td class="s15" dir="ltr">2021-08-15 17:00:00</td><td class="s13" dir="ltr">700</td><td class="s13" dir="ltr">0</td><td class="s13" dir="ltr">450</td><td class="s13" dir="ltr">0</td><td class="s13" dir="ltr">600</td><td class="s13" dir="ltr">0</td><td class="s13" dir="ltr">15</td><td class="s13" dir="ltr">595</td><td class="s13" dir="ltr">4</td><td class="s13" dir="ltr">6666666666</td><td class="s13" dir="ltr">567</td><td class="s13" dir="ltr">2380</td><td class="s15" dir="ltr">2021-08-06 11:50:43</td></tr><tr style="height: 55px"><th id="0R11" style="height: 55px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 55px">12</div></th><td></td><td class="s0" dir="ltr"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R12" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">13</div></th><td class="s16" dir="ltr">К заданию 2 я создам еще одну табличку, чтобы реализовать связь &quot;один ко многим&quot;. Свяжу их по уникальному идентификатору - order_id.</td><td class="s0"></td><td class="s17" dir="ltr">id</td><td class="s17" dir="ltr">order_id</td><td class="s17" dir="ltr">barcode</td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td><td class="s0"></td></tr><tr style="height: 20px"><th id="0R13" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">14</div></th><td class="s16" dir="ltr">Например, в заказе 5 нужно получить 4 баркода</td><td></td><td class="s16" dir="ltr">1</td><td class="s18" dir="ltr">cc509a6f7584</td><td class="s19" dir="ltr">1111111</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr style="height: 20px"><th id="0R14" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">15</div></th><td></td><td></td><td class="s16" dir="ltr">2</td><td class="s18" dir="ltr">cc509a6f7584</td><td class="s16" dir="ltr">2222222</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr style="height: 20px"><th id="0R15" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">16</div></th><td></td><td></td><td class="s16" dir="ltr">3</td><td class="s18" dir="ltr">cc509a6f7584</td><td class="s16" dir="ltr">33333333</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr style="height: 20px"><th id="0R16" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">17</div></th><td></td><td></td><td class="s16" dir="ltr">4</td><td class="s18" dir="ltr">cc509a6f7584</td><td class="s16" dir="ltr">44444444</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div>